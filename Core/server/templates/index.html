<!DOCTYPE html>
<html>
<head>
    <title>TryItFrame</title>

    <script type=text/javascript src="{{url_for('static', filename='jquery-2.1.0.min.js')}}"></script>
    <script type=text/javascript src="{{url_for('static', filename='iframeheight.min.js')}}"></script>
    <script type=text/javascript src="{{url_for('static', filename='parse-1.2.17.min.js')}}"></script>
    <script type=text/javascript src="{{url_for('static', filename='main.js')}}"></script>
    <link rel="stylesheet" href="{{url_for('static', filename='bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
</head>
<body style="width: 100%">
<div id="uploadTab">
    Please upload a real photo of yourself.<br>
    We support only JPG files.<br>

    <div style="text-align: center;">
        <img id="preview" src="#" alt="Preview can't displayed" style="width: 50%; height: auto; display: none;"/>
    </div>

    <div class="form-group">
        <input id="imgInput" type="file" accept="image/jpeg"/>

        <p class="help-block">
            If you have any problems with your upload, try using a smaller picture.<br>
            If you have a webcam, you can take an instant shot<br>
            (only in Chrome, Mozilla Firefox or Opera)
        </p>
    </div>
    <div id="uploadButtons" style="text-align: center;">
        <button id="uploadButton" type="button" class="btn btn-primary" disabled="disabled"
                onclick="uploadClick();">Upload
        </button>
        <button id="toShotButton" type="button" class="btn btn-default" onclick="toShot();">Take Photo</button>
    </div>
</div>

<div id="shotTab" style="display: none;">
    <video id="video" style="width: 100%; height: auto; background-color: #AAA;"></video>
    <p id="errormessage" style="display: none;">Webcam access is off or other error</p>
    <canvas id="canvas" style="display: none;"></canvas>
    <div id="shotButtons" style="text-align: center">
        <button id="shotButton" type="button" class="btn btn-primary" onclick="shotClick();">Take photo</button>
        <button id="uploadPageButton" type="button" class="btn btn-default" onclick="toUpload();">Back</button>
    </div>
    <div id="sendButtons" style="text-align: center; display: none;">
        <button id="saveButton" type="button" class="btn btn-primary" onclick="sendClick();">Send and continue
        </button>
        <button id="backButton" type="button" class="btn btn-default" onclick="shotAgainClick();">Try again</button>
    </div>
</div>

<div id="resultTab" style="display: none;">
    <div style="text-align: center;">
        <img id="result" src="#" alt="Result can't displayed" style="width: 50%; height: auto;"/><br>
        <h1>
            <small>Your score:</small>
            <label id="pts"></label>
            <small>%</small>
        </h1>

        <span class="rating" style="text-align: center;">
            <input type="radio" class="rating-input"
                   id="rating-input-1-5" name="rating-input-1">
            <label for="rating-input-1-5" class="rating-star"></label>
            <input type="radio" class="rating-input"
                   id="rating-input-1-4" name="rating-input-1">
            <label for="rating-input-1-4" class="rating-star"></label>
            <input type="radio" class="rating-input"
                   id="rating-input-1-3" name="rating-input-1">
            <label for="rating-input-1-3" class="rating-star"></label>
            <input type="radio" class="rating-input"
                   id="rating-input-1-2" name="rating-input-1">
            <label for="rating-input-1-2" class="rating-star"></label>
            <input type="radio" class="rating-input"
                   id="rating-input-1-1" name="rating-input-1">
            <label for="rating-input-1-1" class="rating-star"></label>
        </span>
    </div>

    <div id="commentPanel">
        <textarea id="comment" class="form-control"
                  style="width: 100%; border-bottom-left-radius: 0; border-bottom-right-radius: 0; max-width: 100%"
                  placeholder="Your opinion about this service"></textarea>

        <div class="input-group input-group">
            <input type="text" id="email" placeholder="Email (optional)" class="form-control input" style="border-top-left-radius: 0;">
            <span class="input-group-btn btn-group-custom" style="border-top-right-radius: 0;">
                <button id="submitButton" class="btn btn-primary" style="border-top-right-radius: 0;">Submit</button>
            </span>
        </div>
    </div>
    <div id="thankYouPanel" style="display: none">
        <h2 style="text-align: center">Thank you!</h2>
    </div>
    <br>

    <div id="resultButtons" style="text-align: center;">
        <button id="shareButton" type="button" class="btn btn-primary" disabled="disabled">Share</button>
        <button id="back3Button" type="button" class="btn btn-default" onclick="toUpload();">Try again</button>
    </div>
</div>

<div id="errorTab" style="display: none;">
    <div style="text-align: center;">
        <h2>
            <small>Server response is:</small><br>
            <label id="errorMsg"></label><br>
            <small>Please, try again</small>
        </h2>
    </div>

    <div id="errorButtons" style="text-align: center;">
        <button id="back4Button" type="button" class="btn btn-default" onclick="toUpload();">Try again</button>
    </div>
</div>

<script language="JavaScript">
    var iframeExt = $.iframeHeightExternal();
    var video = document.querySelector('#video');
    var canvas = document.querySelector('#canvas');
</script>
</body>
</html>
